!function(){var e,t,n=function(e){return("; "+document.cookie).split("; ".concat(e,"=")).pop().split(";")[0]},a=function(){var e=navigator.userAgent;switch(!0){case/iPhone/i.test(e):return"IPHONE";case/Android/i.test(e):return"ANDROID";case/Mobi|webOS|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e):return"MOBILE";default:return"DESKTOP"}},r=function(){var e=navigator.userAgent;switch(!0){case e.indexOf("Firefox")>-1:return"FIREFOX";case e.indexOf("Chrome")>-1&&-1===e.indexOf("Edg")&&-1===e.indexOf("OPR"):return"CHROME";case e.indexOf("Safari")>-1&&-1===e.indexOf("Chrome"):return"SAFARI";case e.indexOf("Edg")>-1:return"EDGE";case e.indexOf("OPR")>-1||e.indexOf("Opera")>-1:return"OPERA";default:return"UNKNOWN"}},o=function(){var e=navigator.userAgent;switch(!0){case-1!=e.indexOf("Win"):return"WINDOWS";case-1!=e.indexOf("Mac"):return"MAC";case-1!=e.indexOf("Linux"):return"LINUX";case-1!=e.indexOf("iPhone"):return"IOS";case-1!=e.indexOf("Android"):return"ANDROID";default:return"UNKNOWN"}},i=function(){var e=new URL(window.location.href);switch(!0){case"/book"===e.pathname:return"HOME PAGE";case"/electronics"===e.pathname:return"ELECTRONICS PAGE";case"/superstore"===e.pathname:return"SUPERSTORE PAGE";case"/kids-zone"===e.pathname:return"KIDS ZONE PAGE";case"/giftfinder"===e.pathname:return"GIFT FINDER PAGE";case"/offer"===e.pathname:return"OFFER PAGE";case"/corporate"===e.pathname:return"CORPORATE PAGE";case"/quiz"===e.pathname:return"QUIZ PAGE";case/\/(book|product|electronics|giftvoucher)\/\d+\/.*/.test(e.pathname):return"DETAILS PAGE";case/\/book\/author\/\d+\/.*/.test(e.pathname):return"AUTHOR PAGE";case/\/book\/publisher\/\d+\/.*/.test(e.pathname):return"PUBLISHER PAGE";case/\/brand\/\d+\/.*/.test(e.pathname):return"BRAND PAGE";case/\/(book|product|electronics)\/category\/\d+\/.*/.test(e.pathname):return"BROWSE PAGE";case"/cart"===e.pathname:return"CART PAGE";case"/shipping"===e.pathname:return"SHIPPING PAGE";case"/order-place-success"===e.pathname||"/confirmation"===e.pathname||/\/payment\/nagad\/\d+/.test(e.pathname)||"/payment/sslcommerz-payment"===e.pathname||"/payment/bkashpayment"===e.pathname:return"CONFIRMATION PAGE";default:return"OTHERS PAGE"}},s=function(e){return"HEIGHT"===e?window.innerHeight:window.innerWidth},c="userActTraSerBrowId",d="userActTraSerSessId";!function(){var e=n(c).trim();""===e&&(e=crypto.randomUUID());var t=new Date((new Date).getTime()+10368e6).toUTCString();document.cookie="".concat(c,"=").concat(e,"; expires=").concat(t,"; path=/")}(),function(){var e=n(d).trim();""===e&&(e=crypto.randomUUID());var t=new Date((new Date).getTime()+18e5).toUTCString();document.cookie="".concat(d,"=").concat(e,"; expires=").concat(t,"; path=/")}();var p,u,m=function(e){var t=new XMLHttpRequest;t.open("POST","https://activity.rokomari.io/api/v1/content-reached",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e))},h=function(p,u,m){switch(p){case"init":e=u,t=m;break;case"send":var h=new XMLHttpRequest;h.open("POST","https://activity.rokomari.io/api/v1/activities",!0),h.setRequestHeader("Content-Type","application/json"),h.send(JSON.stringify({browserOrDeviceId:n(c),sessionId:n(d),operatingSystemType:o(),browserName:r(),siteId:e,userId:t,deviceType:a(),screenHeight:s("HEIGHT"),screenWidth:s("WIDTH"),pageName:i(),activityType:u,contentId:m}))}},E=document.querySelector('meta[name="user-id"]');E&&(p=E.content),h("init",1,p),"/book"===(u=new URL(window.location.href)).pathname?h("send","HOME_PAGE_VISIT"):/\/(book|product|electronics|giftvoucher)\/\d+\/.*/.test(u.pathname)?(h("send","DETAILS_PAGE_VISIT",u.pathname.split("/")[2]),m([{contentType:"PRODUCT",contentId:u.pathname.split("/")[2]}])):/\/book\/author\/\d+\/.*/.test(u.pathname)?h("send","AUTHOR_PAGE_VISIT",u.pathname.split("/")[3]):/\/book\/publisher\/\d+\/.*/.test(u.pathname)?h("send","PUBLISHER_PAGE_VISIT",u.pathname.split("/")[3]):/\/brand\/\d+\/.*/.test(u.pathname)?h("send","BRAND_PAGE_VISIT",u.pathname.split("/")[2]):/\/(book|product|electronics)\/category\/\d+\/.*/.test(u.pathname)?h("send","BROWSE_PAGE_VISIT",u.pathname.split("/")[3]):"/cart"===u.pathname?h("send","CART_PAGE_VISIT"):"/shipping"===u.pathname?h("send","SHIPPING_PAYMENT_PAGE_VISIT"):"/order-place-success"===u.pathname||"/confirmation"===u.pathname?h("send","ORDER_PLACE",u.pathname.split("/")[2]):/\/payment\/nagad\/\d+/.test(u.pathname)?h("send","ORDER_PLACE",u.pathname.split("/")[3]):"/payment/sslcommerz-payment"===u.pathname?h("send","ORDER_PLACE",u.searchParams.get("order")):"/payment/bkashpayment"===u.pathname?h("send","ORDER_PLACE",u.searchParams.get("orderid")):/\/search\?term=([^&]+)&search_type=[^&]*/.test(u.pathname+u.search)&&h("send","SEARCH_KEYWORD",u.searchParams.get("term")),document.addEventListener("DOMContentLoaded",(function(e){for(var t=document.getElementsByClassName("js--look-inside"),n=0;n<t.length;n++)t[n].addEventListener("click",(function(e){return h("send","LOOK_INSIDER_CLICK",window.location.pathname.split("/")[2])}))})),document.addEventListener("DOMContentLoaded",(function(e){$(document).on("click",".js--add-to-cart",(function(e){if("Add to Cart"===$(this).text().trim()){var t=$(this).attr("product-id");h("send","ADD_TO_CART",t)}}))})),document.addEventListener("DOMContentLoaded",(function(e){$(document).on("click",".js--save-to-wish-list",(function(e){var t=$("#js--product-id").val();h("send","WISH_LIST_ADD",t)}))})),window.onload=function(){var e=document.querySelectorAll("a"),t=new Set,n=new Set,a=new Array,r=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target.getAttribute("href");if(null!=t&&(t.includes("/book/")||t.includes("/product/")||t.includes("/electronics/"))){var a=Number(t.split("/")[2]);isNaN(a)||n.add(a)}}})),n.forEach((function(e){t.has(e)||(t.add(e),a.push({contentType:"PRODUCT",contentId:e}))})),a.length>=4&&(m(a),a.length=0),n.clear()}),{threshold:.5});e.forEach((function(e){r.observe(e)}))}}();